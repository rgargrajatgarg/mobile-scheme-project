(this.webpackJsonpmobile_scheme=this.webpackJsonpmobile_scheme||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(22),s=a.n(r),l=(a(71),a(72),a(73),a.p,a(74),a(34)),o=a(8),i=a(129),d=a(125),j=a(132),u=a(38),b=a(2);var h=function(){return Object(b.jsx)(i.a,{bg:"dark",variant:"dark",children:Object(b.jsxs)(d.a,{className:"wrapper",children:[Object(b.jsxs)(i.a.Brand,{href:"/",children:[Object(b.jsx)("img",{alt:"",src:"/logo.png",width:"30",height:"30",className:"d-inline-block align-top logo"})," ","Prosper"]}),Object(b.jsx)("div",{className:"new-scheme-wrapper",children:Object(b.jsx)(j.a,{onClick:function(e){e.preventDefault(),window.location.href="/newscheme"},className:"new-scheme-button",children:Object(b.jsx)(u.a,{size:40})})})]})})},m=a(16),p=a.n(m),O=a(23),x=a(11),f=a(128),v=a(126),y=a(63),g=a(127),C=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(","),N=a(25),S=a.n(N),_=a(20),w=a.n(_);function T(){return Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(b.jsx)(f.a.Label,{children:"Select the Condition"}),Object(b.jsxs)(v.a,{children:[Object(b.jsx)(y.a,{md:2,xs:4,children:Object(b.jsxs)(f.a.Control,{as:"select",name:"priceOperator",children:[Object(b.jsx)("option",{value:">=",children:">="}),Object(b.jsx)("option",{value:"=",children:"="}),Object(b.jsx)("option",{value:"<=",children:"<="})]})}),Object(b.jsx)(y.a,{children:Object(b.jsx)(f.a.Control,{type:"number",name:"condValue",placeholder:"Enter Condition Value"})})]})]})}function V(){return Object(b.jsx)("div",{})}function D(e){return"No"===e.condType?Object(b.jsx)("div",{}):"Price_Condition"===e.condType?Object(b.jsx)(T,{}):"Model_Condition"===e.condType?Object(b.jsx)(V,{}):Object(b.jsx)("div",{})}var k=function(){var e,t=Object(c.useState)(),a=Object(x.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(),l=Object(x.a)(s,2),i=l[0],d=l[1],u=Object(c.useState)(),h=Object(x.a)(u,2),m=h[0],N=h[1],_=Object(c.useState)(),T=Object(x.a)(_,2),V=T[0],k=T[1],I=Object(c.useState)({date:"",model:"",price:""}),B=Object(x.a)(I,2),E=B[0],L=B[1],G=Object(c.useState)(),P=Object(x.a)(G,2),A=P[0],F=P[1],q=Object(c.useState)(),M=Object(x.a)(q,2),z=M[0],R=M[1],U=Object(c.useState)(),J=Object(x.a)(U,2),H=J[0],K=J[1],Q=Object(o.f)();function W(){return(W=Object(O.a)(p.a.mark((function e(t){var a,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FormData).append("file",m);try{w.a.post("/upload/",a)}catch(s){console.log(s),alert(s.message)}if(t.preventDefault(),"No"===n?(c=null,r=null):"Price_Condition"===n&&(c=t.target.priceOperator.value,r=t.target.condValue.value),!H){e.next=20;break}return e.prev=6,e.next=9,w.a.post("/scheme/",{name:t.target.schemeName.value,start_date:t.target.startDate.value,end_date:t.target.endDate.value,condition_type:t.target.condType.value,price_condition:{operator:c,price:r},data_header:{date:E.date,price:E.price,model:E.model},excel_data:A,creditValue:{creditType:t.target.creditType.value,creditValue:t.target.creditValue.value},excel_file:{name:i.name,size:i.size},fileName:i});case 9:e.sent,alert("Scheme "+t.target.schemeName.value+" added succesfully"),Q.push("/"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),alert(e.t0.message);case 18:e.next=21;break;case 20:alert("Please upload the Activation Sheet & select the correct columns");case 21:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){r("No"),k(null),R(!1)}),[]),V&&(e=V.map((function(e){return Object(b.jsx)("option",{value:e,children:e},e)}))),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col-md-4 offset-md-4",children:[Object(b.jsx)("p",{children:"Please select the Activation file first, then add the scheme details below"}),Object(b.jsx)(f.a,{onSubmit:function(e){e.preventDefault();var t=new FileReader,a=!!t.readAsBinaryString;try{t.onload=function(e){var t=e.target.result,c=S.a.read(t,{type:a?"binary":"array",bookVBA:!0}),n=c.SheetNames[0],r=c.Sheets[n],s=S.a.utils.sheet_to_json(r);F(s),k(Object.keys(s[0])),R(!0)},a?(console.log("rABS"),t.readAsBinaryString(i)):t.readAsArrayBuffer(i)}catch(c){alert("Please select Valid file")}},children:Object(b.jsxs)(f.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(b.jsx)(f.a.Label,{children:"Upload Activation Sheet"}),Object(b.jsx)(f.a.Control,{type:"file",accept:C,onChange:function(e){var t=e.target.files;t&&t[0]&&(console.log(t[0]),d(t[0]))}}),Object(b.jsx)(j.a,{variant:"primary",type:"submit",children:"Upload"})]})}),Object(b.jsxs)(f.a,{onSubmit:function(e){return W.apply(this,arguments)},children:[Object(b.jsxs)(f.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(b.jsx)(f.a.Label,{children:"Upload Scheme Image (Optional)"}),Object(b.jsx)(f.a.Control,{type:"file",name:"file",onChange:function(e){var t=e.target.files;t&&t[0]&&(console.log(t[0]),N(t[0]))}})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(b.jsx)(f.a.Label,{controlId:"floatingInputGrid",label:"Email address",children:Object(b.jsx)(f.a.Control,{required:!0,type:"name",name:"schemeName",placeholder:"Enter Scheme Name"})}),Object(b.jsx)(f.a.Text,{className:"text-muted",children:"Create a new name for scheme to help you track later on"})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"start_date",children:[Object(b.jsx)(f.a.Label,{children:"Start Date"}),Object(b.jsx)(f.a.Control,{required:!0,type:"date",name:"startDate",placeholder:"Scheme Start Date"})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"end_date",children:[Object(b.jsx)(f.a.Label,{children:"End Date"}),Object(b.jsx)(f.a.Control,{type:"date",name:"endDate",placeholder:"Scheme End Date"})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicCondType",children:[Object(b.jsx)(f.a.Label,{children:"Select Condition Type"}),Object(b.jsxs)(f.a.Control,{required:!0,as:"select",name:"condType",value:n,onChange:function(e){console.log("e.target.value",e.target.value),r(e.target.value)},children:[Object(b.jsx)("option",{value:"No",children:"No Condition"}),Object(b.jsx)("option",{value:"Price_Condition",children:"Price Condition"}),Object(b.jsx)("option",{value:"Model_Condition",children:"Model Condition"})]})]}),Object(b.jsx)(D,{condType:n}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(b.jsx)(f.a.Label,{children:"Offered Amount"}),Object(b.jsxs)(v.a,{children:[Object(b.jsx)(y.a,{md:2,xs:4,children:Object(b.jsxs)(f.a.Control,{as:"select",name:"creditType",children:[Object(b.jsx)("option",{value:"%",children:"%"}),Object(b.jsx)("option",{value:"flat",children:"Flat"})]})}),Object(b.jsx)(y.a,{children:Object(b.jsx)(f.a.Control,{type:"number",step:"0.01",name:"creditValue",placeholder:"Enter Value"})})]})]}),Object(b.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(b.jsxs)(g.a,{show:z,children:[Object(b.jsx)(g.a.Header,{children:Object(b.jsx)(g.a.Title,{children:"Please Select the Correct Attributes"})}),Object(b.jsx)(g.a.Body,{children:Object(b.jsxs)(f.a,{onSubmit:function(e){e.preventDefault();var t={date:e.target.dateCol.value,price:e.target.priceCol.value,model:e.target.modelCol.value};return L(t),K(!0),R(!1),Object(b.jsx)("div",{})},children:[Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"date_column",children:[Object(b.jsx)(f.a.Label,{children:"Date Column"}),Object(b.jsx)(f.a.Control,{as:"select",name:"dateCol",children:e})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"model_column",children:[Object(b.jsx)(f.a.Label,{children:"Model Column"}),Object(b.jsx)(f.a.Control,{as:"select",name:"modelCol",children:e})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"Price_column",children:[Object(b.jsx)(f.a.Label,{children:"Price Column"}),Object(b.jsx)(f.a.Control,{as:"select",name:"priceCol",children:e})]}),Object(b.jsx)(g.a.Footer,{children:Object(b.jsx)(j.a,{variant:"primary",type:"Submit",children:"Submit"})})]})})]})]})})})},I=a(130),B=a(131),E=a(42),L=a(66),G=a.n(L);var P=function(){return Object(b.jsx)("div",{style:{width:"100%",height:"100",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(b.jsx)(G.a,{type:"ThreeDots",color:"#2BAD60",height:"100",width:"100"})})};function A(e){return Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e)))}var F=function(){var e,t=Object(c.useState)([]),a=Object(x.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!0),l=Object(x.a)(s,2),o=l[0],i=l[1],d=Object(c.useState)(!1),h=Object(x.a)(d,2),m=h[0],f=h[1],g=Object(c.useState)(!1),C=Object(x.a)(g,2),N=C[0],S=C[1];function _(){return Object(b.jsx)("div",{class:"fixed-bottom",children:Object(b.jsx)(v.a,{children:Object(b.jsx)(y.a,{xs:12,children:Object(b.jsx)(I.a,{onClose:function(){return S(!1)},show:N,delay:2e3,autohide:!0,children:Object(b.jsx)(I.a.Body,{children:"Scheme Deleted Succefully"})})})})})}function T(){return(T=Object(O.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.get("/scheme/").then(i(!1));case 3:t=e.sent,a=t.data.results,r(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),alert("Cannot Fetch your schemes. ERROR : "+e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function V(){return(V=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.prev=1,e.next=4,w.a.delete("/scheme/".concat(t)).then(f(!1)).then(S(!0));case 4:e.sent,r(n.filter((function(e){return e._id!==t}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){T.apply(this,arguments)}()}),[]),n&&(e=n.map((function(e){var t=parseInt(e.creditNote),a=(t=t.toString()).substring(t.length-3),c=t.substring(0,t.length-3),n="/updatescheme/"+e._id;""!=c&&(a=","+a);var r=c.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a;return Object(b.jsx)(B.a,{style:{width:"100%"},id:e._id,className:"mt-4",children:Object(b.jsxs)(B.a.Body,{children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsx)(B.a.Title,{children:e.name})}),Object(b.jsx)("div",{className:"col-md-6",children:Object(b.jsxs)(B.a.Text,{children:[A(e.start_date)," to ",A(e.end_date)]})})]}),Object(b.jsxs)(j.a,{className:"green-background",children:["Credit Note : \u20b9 ",r]}),Object(b.jsxs)(j.a,{className:"view-more",onClick:function(){return function(e){var t=document.getElementById(e),a=t.getElementsByClassName("more-details")[0],c=t.getElementsByClassName("down-icon")[0],n=t.getElementsByClassName("up-icon")[0];"none"===a.style.display||""===a.style.display?(a.style.display="block",c.style.display="none",n.style.display="block"):(a.style.display="none",c.style.display="block",n.style.display="none")}(e._id)},children:[Object(b.jsx)(E.a,{size:30,className:"down-icon"}),Object(b.jsx)(E.b,{size:30,className:"up-icon"})]}),Object(b.jsx)(j.a,{className:"button-edit",onClick:function(e){e.preventDefault(),window.location.href=n},children:Object(b.jsx)(E.c,{size:30})}),Object(b.jsx)(j.a,{className:"button-delete",onClick:function(t){window.confirm("Are you sure you wish to delete this scheme?")&&function(e){V.apply(this,arguments)}(e._id)},children:Object(b.jsx)(u.b,{size:30})}),Object(b.jsxs)("div",{className:"more-details",children:[Object(b.jsx)("span",{children:e.creditValue.creditValue}),Object(b.jsx)("span",{children:e.creditValue.creditType})]})]})},e._id)}))),Object(b.jsx)("div",{className:"container",children:o||m?Object(b.jsx)(P,{}):Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-md-4 offset-md-4 p-0",children:e}),N?Object(b.jsx)(_,{}):""]})})};function q(e){return Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(b.jsx)(f.a.Label,{children:"Select the Condition"}),Object(b.jsxs)(v.a,{children:[Object(b.jsx)(y.a,{md:2,xs:4,children:Object(b.jsxs)(f.a.Control,{defaultValue:e.condition.operator,as:"select",name:"priceOperator",children:[Object(b.jsx)("option",{value:">=",children:">="}),Object(b.jsx)("option",{value:"=",children:"="}),Object(b.jsx)("option",{value:"<=",children:"<="})]})}),Object(b.jsx)(y.a,{children:Object(b.jsx)(f.a.Control,{defaultValue:e.condition.price,type:"number",name:"condValue",placeholder:"Enter Condition Value"})})]})]})}function M(){return Object(b.jsx)("div",{})}function z(e){return"No"===e.condType?Object(b.jsx)("div",{}):"Price_Condition"===e.condType?Object(b.jsx)(q,{condition:e.condition}):"Model_Condition"===e.condType?Object(b.jsx)(M,{}):Object(b.jsx)("div",{})}var R=function(e){var t=e.match.params.id,a=Object(c.useState)(),n=Object(x.a)(a,2),r=n[0],s=n[1],l=Object(c.useState)(),i=Object(x.a)(l,2),d=i[0],u=i[1],h=Object(c.useState)([]),m=Object(x.a)(h,2),g=m[0],C=m[1],N=Object(o.f)();function S(){return S=Object(O.a)(p.a.mark((function e(t){var a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,w.a.get("/scheme/".concat(t));case 4:a=e.sent,c=a.data.results,u(c),s(c.condition_type),"Price_Condition"===c.condition_type&&C(c.price_condition),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),alert(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),S.apply(this,arguments)}function _(){return(_=Object(O.a)(p.a.mark((function e(a){var c,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),"No"===r?(c=null,n=null):"Price_Condition"===r&&(c=a.target.priceOperator.value,n=a.target.condValue.value),e.prev=2,e.next=5,w.a.put("/scheme/".concat(t),{name:a.target.schemeName.value,start_date:a.target.startDate.value,end_date:a.target.endDate.value,condition_type:a.target.condType.value,price_condition:{operator:c,price:n},creditValue:{creditType:a.target.creditType.value,creditValue:a.target.creditValue.value}});case 5:e.sent,alert("Scheme "+a.target.schemeName.value+" updated succesfully"),N.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(e){S.apply(this,arguments)}(t)}),[]),d?Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(b.jsxs)(f.a,{onSubmit:function(e){return _.apply(this,arguments)},children:[Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(b.jsx)(f.a.Label,{children:"Scheme Name"}),Object(b.jsx)(f.a.Control,{required:!0,type:"name",name:"schemeName",placeholder:"Enter Scheme Name",defaultValue:d.name}),Object(b.jsx)(f.a.Text,{className:"text-muted",children:"Create a new name for scheme to help you track later on"})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"start_date",children:[Object(b.jsx)(f.a.Label,{children:"Start Date"}),Object(b.jsx)(f.a.Control,{required:!0,type:"date",name:"startDate",placeholder:"Scheme Start Date",defaultValue:d.start_date.split("T")[0]})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"end_date",children:[Object(b.jsx)(f.a.Label,{children:"End Date"}),Object(b.jsx)(f.a.Control,{type:"date",name:"endDate",placeholder:"Scheme End Date",defaultValue:d.end_date.split("T")[0]})]}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicCondType",children:[Object(b.jsxs)(f.a.Label,{children:["Select Condition Type ",d.condition_type]}),Object(b.jsxs)(f.a.Control,{required:!0,defaultValue:d.condition_type,as:"select",name:"condType",onChange:function(e){console.log("e.target.value",e.target.value),s(e.target.value)},children:[Object(b.jsx)("option",{value:"No",children:"No Condition"}),Object(b.jsx)("option",{value:"Price_Condition",children:"Price Condition"}),Object(b.jsx)("option",{value:"Model_Condition",children:"Model Condition"})]})]}),Object(b.jsx)(z,{condType:r,condition:g}),Object(b.jsxs)(f.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(b.jsx)(f.a.Label,{children:"Offered Amount"}),Object(b.jsxs)(v.a,{children:[Object(b.jsx)(y.a,{md:2,xs:4,children:Object(b.jsxs)(f.a.Control,{defaultValue:d.creditValue.creditType,as:"select",name:"creditType",children:[Object(b.jsx)("option",{value:"%",children:"%"}),Object(b.jsx)("option",{value:"flat",children:"Flat"})]})}),Object(b.jsx)(y.a,{children:Object(b.jsx)(f.a.Control,{type:"number",step:"0.01",name:"creditValue",placeholder:"Enter Value",defaultValue:d.creditValue.creditValue})})]})]}),Object(b.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]})})})}):Object(b.jsx)("div",{children:"Loading Scheme..."})};var U=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(h,{}),Object(b.jsx)(l.a,{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{path:"/newscheme",children:Object(b.jsx)(k,{})}),Object(b.jsx)(o.a,{path:"/scheme",children:Object(b.jsx)(F,{})}),Object(b.jsx)(o.a,{path:"/updatescheme/:id",component:R}),Object(b.jsx)(o.a,{path:"/",children:Object(b.jsx)(F,{})})]})})]})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,133)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(U,{})}),document.getElementById("root")),J()},53:function(e,t){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},83:function(e,t){},84:function(e,t){}},[[123,1,2]]]);
//# sourceMappingURL=main.1182c71f.chunk.js.map