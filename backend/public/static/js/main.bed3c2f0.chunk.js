(this.webpackJsonpmobile_scheme=this.webpackJsonpmobile_scheme||[]).push([[0],{35:function(e,t){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},62:function(e,t){},63:function(e,t){},87:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(17),l=a.n(r),s=(a(53),a(54),a(55),a.p,a(56),a(24)),o=a(7),i=a(13),d=a.n(i),j=a(18),u=a(10),b=a(91),h=a(89),m=a(45),p=a(92),O=a(90),x=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(","),f=a(19),v=a.n(f),y=a(16),g=a.n(y),C=a(1);function N(){return Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(C.jsx)(b.a.Label,{children:"Select the Condition"}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(m.a,{md:2,xs:4,children:Object(C.jsxs)(b.a.Control,{as:"select",name:"priceOperator",children:[Object(C.jsx)("option",{value:">=",children:">="}),Object(C.jsx)("option",{value:"=",children:"="}),Object(C.jsx)("option",{value:"<=",children:"<="})]})}),Object(C.jsx)(m.a,{children:Object(C.jsx)(b.a.Control,{type:"number",name:"condValue",placeholder:"Enter Condition Value"})})]})]})}function S(){return Object(C.jsx)("div",{})}function _(e){return"No"===e.condType?Object(C.jsx)("div",{}):"Price_Condition"===e.condType?Object(C.jsx)(N,{}):"Model_Condition"===e.condType?Object(C.jsx)(S,{}):Object(C.jsx)("div",{})}var T=function(){var e,t=Object(c.useState)(),a=Object(u.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(),s=Object(u.a)(l,2),i=s[0],f=s[1],y=Object(c.useState)(),N=Object(u.a)(y,2),S=N[0],T=N[1],w=Object(c.useState)(),V=Object(u.a)(w,2),D=V[0],k=V[1],I=Object(c.useState)({date:"",model:"",price:""}),L=Object(u.a)(I,2),B=L[0],E=L[1],G=Object(c.useState)(),P=Object(u.a)(G,2),A=P[0],F=P[1],M=Object(c.useState)(),q=Object(u.a)(M,2),U=q[0],H=q[1],z=Object(c.useState)(),J=Object(u.a)(z,2),R=J[0],K=J[1],Q=Object(o.f)();function W(){return(W=Object(j.a)(d.a.mark((function e(t){var a,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=new FormData).append("file",S);try{g.a.post("http://localhost:3000/upload/",a)}catch(l){console.log(l),alert(l.message)}if(t.preventDefault(),"No"===n?(c=null,r=null):"Price_Condition"===n&&(c=t.target.priceOperator.value,r=t.target.condValue.value),!R){e.next=20;break}return e.prev=6,e.next=9,g.a.post("http://localhost:3000/scheme/",{name:t.target.schemeName.value,start_date:t.target.startDate.value,end_date:t.target.endDate.value,condition_type:t.target.condType.value,price_condition:{operator:c,price:r},data_header:{date:B.date,price:B.price,model:B.model},excel_data:A,creditValue:{creditType:t.target.creditType.value,creditValue:t.target.creditValue.value},excel_file:{name:i.name,size:i.size},fileName:i});case 9:e.sent,alert("Scheme "+t.target.schemeName.value+" added succesfully"),Q.push("/"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),alert(e.t0.message);case 18:e.next=21;break;case 20:alert("Please upload the Activation Sheet & select the correct columns");case 21:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){r("No"),k(null),H(!1)}),[]),D&&(e=D.map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))),Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col-md-4 offset-md-4",children:[Object(C.jsx)("p",{children:"Please select the Activation file first, then add the scheme details below"}),Object(C.jsx)(b.a,{onSubmit:function(e){e.preventDefault();var t=new FileReader,a=!!t.readAsBinaryString;try{t.onload=function(e){var t=e.target.result,c=v.a.read(t,{type:a?"binary":"array",bookVBA:!0}),n=c.SheetNames[0],r=c.Sheets[n],l=v.a.utils.sheet_to_json(r);F(l),k(Object.keys(l[0])),H(!0)},a?(console.log("rABS"),t.readAsBinaryString(i)):t.readAsArrayBuffer(i)}catch(c){alert("Please select Valid file")}},children:Object(C.jsxs)(b.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(C.jsx)(b.a.Label,{children:"Upload Activation Sheet"}),Object(C.jsx)(b.a.Control,{type:"file",accept:x,onChange:function(e){var t=e.target.files;t&&t[0]&&(console.log(t[0]),f(t[0]))}}),Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Upload"})]})}),Object(C.jsxs)(b.a,{onSubmit:function(e){return W.apply(this,arguments)},children:[Object(C.jsxs)(b.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(C.jsx)(b.a.Label,{children:"Upload Scheme Image (Optional)"}),Object(C.jsx)(b.a.Control,{type:"file",name:"file",onChange:function(e){var t=e.target.files;t&&t[0]&&(console.log(t[0]),T(t[0]))}})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(C.jsx)(b.a.Label,{children:"Scheme Name"}),Object(C.jsx)(b.a.Control,{required:!0,type:"name",name:"schemeName",placeholder:"Enter Scheme Name"}),Object(C.jsx)(b.a.Text,{className:"text-muted",children:"Create a new name for scheme to help you track later on"})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"start_date",children:[Object(C.jsx)(b.a.Label,{children:"Start Date"}),Object(C.jsx)(b.a.Control,{required:!0,type:"date",name:"startDate",placeholder:"Scheme Start Date"})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"end_date",children:[Object(C.jsx)(b.a.Label,{children:"End Date"}),Object(C.jsx)(b.a.Control,{type:"date",name:"endDate",placeholder:"Scheme End Date"})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicCondType",children:[Object(C.jsx)(b.a.Label,{children:"Select Condition Type"}),Object(C.jsxs)(b.a.Control,{required:!0,as:"select",name:"condType",value:n,onChange:function(e){console.log("e.target.value",e.target.value),r(e.target.value)},children:[Object(C.jsx)("option",{value:"No",children:"No Condition"}),Object(C.jsx)("option",{value:"Price_Condition",children:"Price Condition"}),Object(C.jsx)("option",{value:"Model_Condition",children:"Model Condition"})]})]}),Object(C.jsx)(_,{condType:n}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(C.jsx)(b.a.Label,{children:"Offered Amount"}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(m.a,{md:2,xs:4,children:Object(C.jsxs)(b.a.Control,{as:"select",name:"creditType",children:[Object(C.jsx)("option",{value:"%",children:"%"}),Object(C.jsx)("option",{value:"flat",children:"Flat"})]})}),Object(C.jsx)(m.a,{children:Object(C.jsx)(b.a.Control,{type:"number",step:"0.01",name:"creditValue",placeholder:"Enter Value"})})]})]}),Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(C.jsxs)(O.a,{show:U,children:[Object(C.jsx)(O.a.Header,{children:Object(C.jsx)(O.a.Title,{children:"Please Select the Correct Attributes"})}),Object(C.jsx)(O.a.Body,{children:Object(C.jsxs)(b.a,{onSubmit:function(e){e.preventDefault();var t={date:e.target.dateCol.value,price:e.target.priceCol.value,model:e.target.modelCol.value};return E(t),K(!0),H(!1),Object(C.jsx)("div",{})},children:[Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"date_column",children:[Object(C.jsx)(b.a.Label,{children:"Date Column"}),Object(C.jsx)(b.a.Control,{as:"select",name:"dateCol",children:e})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"model_column",children:[Object(C.jsx)(b.a.Label,{children:"Model Column"}),Object(C.jsx)(b.a.Control,{as:"select",name:"modelCol",children:e})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"Price_column",children:[Object(C.jsx)(b.a.Label,{children:"Price Column"}),Object(C.jsx)(b.a.Control,{as:"select",name:"priceCol",children:e})]}),Object(C.jsx)(O.a.Footer,{children:Object(C.jsx)(p.a,{variant:"primary",type:"Submit",children:"Submit"})})]})})]})]})})})},w=a(93);function V(e){return Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit"}).format(new Date(Date.parse(e)))}function D(){return(D=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("http://localhost:3000/scheme/".concat(t));case 3:e.sent,alert("Deleted scheme Succesfully"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var k=function(){var e,t=Object(c.useState)([]),a=Object(u.a)(t,2),n=a[0],r=a[1];function l(){return(l=Object(j.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("http://localhost:3000/scheme/");case 3:t=e.sent,a=t.data.results,r(a),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),alert(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),n&&(e=n.map((function(e){var t=parseInt(e.creditNote),a=(t=t.toString()).substring(t.length-3),c=t.substring(0,t.length-3),n="/updatescheme/"+e._id;""!=c&&(a=","+a);var r=c.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a;return Object(C.jsxs)(w.a,{style:{width:"100%"},id:e._id,children:[Object(C.jsx)(w.a.Img,{variant:"top",src:"assets/images/special_offer.jpg"}),Object(C.jsxs)(w.a.Body,{children:[Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-6",children:Object(C.jsx)(w.a.Title,{children:e.name})}),Object(C.jsx)("div",{className:"col-md-6",children:Object(C.jsxs)(w.a.Text,{children:[V(e.start_date)," to ",V(e.end_date)]})})]}),Object(C.jsxs)(p.a,{className:"green-background",children:["Credit Note : \u20b9 ",r]}),Object(C.jsx)(p.a,{className:"view-more",onClick:function(){return function(e){var t=document.getElementById(e),a=t.getElementsByClassName("more-details")[0],c=t.getElementsByClassName("view-more")[0];"none"===a.style.display||""===a.style.display?(a.style.display="block",c.innerHTML="Show less"):(a.style.display="none",c.innerHTML="Show More")}(e._id)},children:"Show More"}),Object(C.jsx)(p.a,{className:"green-background",children:Object(C.jsx)("a",{href:n,children:"Edit Scheme"})}),Object(C.jsx)(p.a,{danger:!0,onClick:function(){return function(e){return D.apply(this,arguments)}(e._id)},children:"Delete Scheme"}),Object(C.jsxs)("div",{className:"more-details",children:[Object(C.jsx)("span",{children:e.creditValue.creditValue}),Object(C.jsx)("span",{children:e.creditValue.creditType})]})]})]})}))),Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col-md-4 offset-md-4 p-0",children:[Object(C.jsx)("a",{href:"/newscheme",children:"Add Scheme"}),e]})})})};function I(e){return Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(C.jsx)(b.a.Label,{children:"Select the Condition"}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(m.a,{md:2,xs:4,children:Object(C.jsxs)(b.a.Control,{defaultValue:e.condition.operator,as:"select",name:"priceOperator",children:[Object(C.jsx)("option",{value:">=",children:">="}),Object(C.jsx)("option",{value:"=",children:"="}),Object(C.jsx)("option",{value:"<=",children:"<="})]})}),Object(C.jsx)(m.a,{children:Object(C.jsx)(b.a.Control,{defaultValue:e.condition.price,type:"number",name:"condValue",placeholder:"Enter Condition Value"})})]})]})}function L(){return Object(C.jsx)("div",{})}function B(e){return"No"===e.condType?Object(C.jsx)("div",{}):"Price_Condition"===e.condType?Object(C.jsx)(I,{condition:e.condition}):"Model_Condition"===e.condType?Object(C.jsx)(L,{}):Object(C.jsx)("div",{})}var E=function(e){var t=e.match.params.id,a=Object(c.useState)(),n=Object(u.a)(a,2),r=n[0],l=n[1],s=Object(c.useState)(),i=Object(u.a)(s,2),O=i[0],x=i[1],f=Object(c.useState)([]),v=Object(u.a)(f,2),y=v[0],N=v[1],S=Object(o.f)();function _(){return _=Object(j.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,g.a.get("http://localhost:3000/scheme/".concat(t));case 4:a=e.sent,c=a.data.results,x(c),l(c.condition_type),"Price_Condition"===c.condition_type&&N(c.price_condition),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),alert(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),_.apply(this,arguments)}function T(){return(T=Object(j.a)(d.a.mark((function e(a){var c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),"No"===r?(c=null,n=null):"Price_Condition"===r&&(c=a.target.priceOperator.value,n=a.target.condValue.value),e.prev=2,e.next=5,g.a.put("http://localhost:3000/scheme/".concat(t),{name:a.target.schemeName.value,start_date:a.target.startDate.value,end_date:a.target.endDate.value,condition_type:a.target.condType.value,price_condition:{operator:c,price:n},creditValue:{creditType:a.target.creditType.value,creditValue:a.target.creditValue.value}});case 5:e.sent,alert("Scheme "+a.target.schemeName.value+" updated succesfully"),S.push("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(e){_.apply(this,arguments)}(t)}),[]),O?Object(C.jsx)("div",{className:"container",children:Object(C.jsx)("div",{className:"row",children:Object(C.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(C.jsxs)(b.a,{onSubmit:function(e){return T.apply(this,arguments)},children:[Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicName",children:[Object(C.jsx)(b.a.Label,{children:"Scheme Name"}),Object(C.jsx)(b.a.Control,{required:!0,type:"name",name:"schemeName",placeholder:"Enter Scheme Name",defaultValue:O.name}),Object(C.jsx)(b.a.Text,{className:"text-muted",children:"Create a new name for scheme to help you track later on"})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"start_date",children:[Object(C.jsx)(b.a.Label,{children:"Start Date"}),Object(C.jsx)(b.a.Control,{required:!0,type:"date",name:"startDate",placeholder:"Scheme Start Date",defaultValue:O.start_date.split("T")[0]})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"end_date",children:[Object(C.jsx)(b.a.Label,{children:"End Date"}),Object(C.jsx)(b.a.Control,{type:"date",name:"endDate",placeholder:"Scheme End Date",defaultValue:O.end_date.split("T")[0]})]}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicCondType",children:[Object(C.jsxs)(b.a.Label,{children:["Select Condition Type ",O.condition_type]}),Object(C.jsxs)(b.a.Control,{required:!0,defaultValue:O.condition_type,as:"select",name:"condType",onChange:function(e){console.log("e.target.value",e.target.value),l(e.target.value)},children:[Object(C.jsx)("option",{value:"No",children:"No Condition"}),Object(C.jsx)("option",{value:"Price_Condition",children:"Price Condition"}),Object(C.jsx)("option",{value:"Model_Condition",children:"Model Condition"})]})]}),Object(C.jsx)(B,{condType:r,condition:y}),Object(C.jsxs)(b.a.Group,{className:"mb-3",controlId:"formBasicOperator",children:[Object(C.jsx)(b.a.Label,{children:"Offered Amount"}),Object(C.jsxs)(h.a,{children:[Object(C.jsx)(m.a,{md:2,xs:4,children:Object(C.jsxs)(b.a.Control,{defaultValue:O.creditValue.creditType,as:"select",name:"creditType",children:[Object(C.jsx)("option",{value:"%",children:"%"}),Object(C.jsx)("option",{value:"flat",children:"Flat"})]})}),Object(C.jsx)(m.a,{children:Object(C.jsx)(b.a.Control,{type:"number",step:"0.01",name:"creditValue",placeholder:"Enter Value",defaultValue:O.creditValue.creditValue})})]})]}),Object(C.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})})})}):Object(C.jsx)("div",{children:"Loading Scheme..."})};var G=function(){return Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(s.a,{children:Object(C.jsxs)(o.c,{children:[Object(C.jsx)(o.a,{path:"/newscheme",children:Object(C.jsx)(T,{})}),Object(C.jsx)(o.a,{path:"/scheme",children:Object(C.jsx)(k,{})}),Object(C.jsx)(o.a,{path:"/updatescheme/:id",component:E}),Object(C.jsx)(o.a,{path:"/",children:Object(C.jsx)(k,{})})]})})})},P=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,94)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),c(e),n(e),r(e),l(e)}))};l.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(G,{})}),document.getElementById("root")),P()}},[[87,1,2]]]);
//# sourceMappingURL=main.bed3c2f0.chunk.js.map